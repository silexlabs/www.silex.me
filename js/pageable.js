(function($,undefined){$.widget('silexlabs.pageable',{version:'1.0.1',options:{currentPage:"home",useDeeplink:true,pageClass:'paged-element',onPageChanged:null,window:window},_setOption:function(key,value){this.options[key]=value;switch(key){case'useDeeplink':this._destroy();this._create();break;case'currentPage':case'pageClass':this.currentPageChanged=true;this.updatePage();break;}},_create:function(){this.initialPage=this.options.currentPage;$(document.body).addClass('pageable-plugin-created');var that=this;if(this.options.useDeeplink){$(this.options.window).bind('hashchange',this.cbk=function(){that.updatePage()});}
else{this.element.find('a').each(function(){$(this).bind('click',function(event){event.preventDefault();that.options.currentPage=$(this).attr('href');that.updatePage();});});}
$('.'+ this.options.pageClass).each(function(){if(!$(this).hasClass('paged-element-hidden'))
$(this).addClass('paged-element-hidden');});this.updatePage();},_destroy:function(){if(this.options.useDeeplink){$(this.options.window).unbind('hashchange',this.cbk);}
else{this.element.find('a').each(function(){$(this).unbind('click');});}},updatePage:function(){if(this.options.useDeeplink){if(this.options.window.location.hash&&this.options.window.location.hash.indexOf('#!')>=0){this.options.currentPage=this.options.window.location.hash;}
else if(!this.currentPageChanged){this.options.currentPage=this.initialPage;}}
this.currentPageChanged=false;if(this.options.currentPage&&this.options.currentPage.indexOf('#!')>=0){this.options.currentPage=this.options.currentPage.substr(this.options.currentPage.indexOf('#!')+ 2);}
$('#current-page-style').remove();$('head').append('<style id="current-page-style">.'+this.options.currentPage+'{display:inherit; }</style>');$('.paged-element-visible').each(function(){$(this).removeClass('paged-element-visible');$(this).addClass('paged-element-hidden');});$('.'+this.options.currentPage).each(function(){$(this).addClass('paged-element-visible');$(this).removeClass('paged-element-hidden');});$('.page-link-active').removeClass('page-link-active');$('[href="#!'+this.options.currentPage+'"]').addClass('page-link-active');$(this.element).trigger('pageChanged',[this.options.currentPage]);if(this.options.onPageChanged)this.options.onPageChanged(this.options.currentPage);}});})(jQuery);